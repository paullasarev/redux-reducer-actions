"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var lodash=require("lodash");function dispatchActions(e,t){for(const s of t)e.dispatch(s)}function scheduleActions(e,t,s,c,n){s&&s("run actions",t,n),c(t=>{dispatchActions(e,t)},0,n)}const createActionsEnhancer=(e={})=>t=>(s,c,n)=>{const{startActionType:o,log:a,schedule:i=setTimeout}=e;let r,h=[],l=!!o;const d=e=>(t,s)=>{const c=e(t,s);if(lodash.each(c,e=>{lodash.has(e,"actions")&&lodash.isArray(e.actions)&&e.actions.length&&(h.push(...e.actions),delete e.actions)}),l&&s.type===o&&(l=!1),!l&&h.length){const e=lodash.uniqWith(h,lodash.isEqual);h=[],scheduleActions(r,s.type,a,i,e)}return c};r=t(d(s),c,n);return{...r,replaceReducer:e=>r.replaceReducer(d(e))}};exports.createActionsEnhancer=createActionsEnhancer;
